'TYPO3.Neos:ContentCollection':
  constraints:
    nodeTypes:
      'MapSeven.Gallery:Image': FALSE
      'MapSeven.Gallery:CarouselImage': FALSE

'TYPO3.Neos.NodeTypes:Image':
  superTypes:
    - 'TYPO3.Neos:Content'
    - 'TYPO3.Neos.NodeTypes:ContentImageMixin'
    - 'MapSeven.Gallery:ImageLightboxMixin'

'TYPO3.Neos.NodeTypes:TextWithImage':
  superTypes:
    - 'TYPO3.Neos:Content'
    - 'TYPO3.Neos.NodeTypes:TextMixin'
    - 'TYPO3.Neos.NodeTypes:ContentImageMixin'
    - 'MapSeven.Gallery:ImageLightboxMixin'

'MapSeven.Gallery:ImageLightboxMixin':
  abstract: TRUE
  properties:
    clickEnlarge:
      type: boolean
      ui:
        label: 'ClickEnlarge'
        inspector:
          group: 'image'
    showInGallery:
      type: string
      ui:
        label: 'show also in Gallery'
        reloadIfChanged: TRUE
        inspector:
          group: 'image'

'MapSeven.Gallery:Gallery':
  superTypes:
    - 'TYPO3.Neos.NodeTypes:Column'
    - 'MapSeven.Gallery:GallerySettingsMixin'
  ui:
    label: 'Gallery'
    group: 'gallery'
    icon: 'icon-picture'
    inlineEditable: TRUE
    inspector:
      groups:
        'settings':
          label: 'Gallery Settings'
  childNodes:
    image:
      type: 'TYPO3.Neos:ContentCollection'
      constraints:
        nodeTypes:
          'MapSeven.Gallery:Image': TRUE
          '*': FALSE

# use this only for gallery images
'MapSeven.Gallery:Image':
  superTypes:
    - 'TYPO3.Neos:Content'
    - 'TYPO3.Neos.NodeTypes:ImageMixin'
  ui:
    label: 'Image'
    icon: 'icon-picture'
  properties:
    caption:
      type: string
      defaultValue: ''
      ui:
        label: 'Caption'
        reloadIfChanged: TRUE
        inlineEditable: FALSE
        inspector:
          group: 'image'
    hideInOverview:
      type: boolean
      ui:
        label: 'Hide in Overview'
        inspector:
          group: 'image'

'MapSeven.Gallery:TagGallery':
  superTypes:
    - 'TYPO3.Neos:Content'
    - 'MapSeven.Gallery:GallerySettingsMixin'
  ui:
    label: 'Tag Gallery'
    group: 'gallery'
    icon: 'icon-picture'
    inspector:
      groups:
        'settings':
          label: 'Gallery Settings'
  properties:
    width:
      type: string
      defaultValue: ''
      ui:
        label: 'Image Width'
        reloadIfChanged: TRUE
        inspector:
          group: 'settings'
    height:
      type: string
      defaultValue: ''
      ui:
        label: 'Image Height'
        reloadIfChanged: TRUE
        inspector:
          group: 'settings'
    title:
      type: string
      defaultValue: ''
      ui:
        label: 'Title'
        reloadIfChanged: TRUE
        inspector:
          group: 'settings'
    tags:
      type: array
      ui:
        label: 'Tags'
        inspector:
          group: 'settings'
          editor: 'TYPO3.Neos/Inspector/Editors/SelectBoxEditor'
          editorOptions:
            dataSourceIdentifier: 'mapseven-gallery-tag'
    previewImage:
      type: TYPO3\Media\Domain\Model\ImageVariant
      ui:
        label: 'previewImage'
        reloadIfChanged: TRUE
        inspector:
          group: 'settings'

'MapSeven.Gallery:Carousel':
  superTypes:
    - 'TYPO3.Neos.NodeTypes:Column'
  ui:
    label: 'Carousel'
    group: 'gallery'
    icon: 'icon-picture'
    inlineEditable: TRUE
    inspector:
      groups:
        'settings':
          label: 'Carousel Settings'
  childNodes:
    'image':
      type: 'TYPO3.Neos:ContentCollection'
      constraints:
        nodeTypes:
          'MapSeven.Gallery:CarouselImage': TRUE
          '*': FALSE
  properties:
    items:
      type: string
      defaultValue: '1'
      ui:
        label: 'Items displayed at a time'
        reloadIfChanged: TRUE
        inspector:
          group: 'settings'
          editor: Content/Inspector/Editors/SelectBoxEditor
          editorOptions:
            values:
              '1':
                label: '1'
              '2':
                label: '2'
              '3':
                label: '3'
              '4':
                label: '4'
              '5':
                label: '5'
              '6':
                label: '6'
              '7':
                label: '7'
              '8':
                label: '8'
    navigation:
      type: boolean
      ui:
        label: 'Show Navigation'
        inspector:
          group: 'settings'
    pagination:
      type: boolean
      ui:
        label: 'Show Pagination'
        inspector:
          group: 'settings'
    autoPlay:
      type: boolean
      ui:
        label: 'Autoplay'
        inspector:
          group: 'settings'
    stopOnHover:
      type: boolean
      ui:
        label: 'Stop on hover'
        inspector:
          group: 'settings'
    autoHeight:
      type: boolean
      ui:
        label: 'Auto Height'
        inspector:
          group: 'settings'

# use this only for gallery images
'MapSeven.Gallery:CarouselImage':
  superTypes:
    - 'TYPO3.Neos:Content'
    - 'TYPO3.Neos.NodeTypes:ImageMixin'
  ui:
    label: 'Image'
    icon: 'icon-picture'
    inspector:
      groups:
        'caption':
          label: 'Caption'
  properties:
    caption:
      type: string
      defaultValue: ''
      ui:
        label: 'Caption'
        reloadIfChanged: TRUE
        inlineEditable: FALSE
        inspector:
          group: 'caption'
    captionAlignment:
      type: string
      defaultValue: 'bottom center'
      ui:
        reloadIfChanged: TRUE
        label: 'Caption Alignment'
        inspector:
          group: 'caption'
          editor: Content/Inspector/Editors/SelectBoxEditor
          editorOptions:
            values:
              'top left':
                label: 'top left'
              'top center':
                label: 'top center'
              'top right':
                label: 'top right'
              'middle left':
                label: 'middle left'
              'middle center':
                label: 'middle center'
              'middle right':
                label: 'middle right'
              'bottom left':
                label: 'bottom left'
              'bottom center':
                label: 'bottom center'
              'bottom right':
                label: 'bottom right'
              'below':
                label: 'below'
    captionColor:
      type: string
      defaultValue: 'white'
      ui:
        reloadIfChanged: TRUE
        label: 'Caption Color'
        inspector:
          group: 'caption'
          editor: Content/Inspector/Editors/SelectBoxEditor
          editorOptions:
            values:
              'white':
                label: 'white'
              'black':
                label: 'black'
    captionBackground:
      type: string
      defaultValue: 'none'
      ui:
        reloadIfChanged: TRUE
        label: 'Caption Background'
        inspector:
          group: 'caption'
          editor: Content/Inspector/Editors/SelectBoxEditor
          editorOptions:
            values:
              'none':
                label: 'none'
              'white':
                label: 'white'
              'black':
                label: 'black'

'MapSeven.Gallery:GallerySettingsMixin':
  abstract: TRUE
  properties:
    marginBottom:
      type: string
      defaultValue: 'margin-bottom-20'
      ui:
        reloadIfChanged: TRUE
        label: 'Margin Bottom'
        inspector:
          group: 'settings'
          editor: Content/Inspector/Editors/SelectBoxEditor
          editorOptions:
            values:
              '0':
                label: ''
              '5':
                label: '5'
              '10':
                label: '10'
              '15':
                label: '15'
              '20':
                label: '20'
              '25':
                label: '25'
              '30':
                label: '30'
    columns:
      type: string
      defaultValue: '3'
      ui:
        reloadIfChanged: TRUE
        label: 'Images per Row'
        inspector:
          group: 'settings'
          editor: Content/Inspector/Editors/SelectBoxEditor
          editorOptions:
            values:
              '1':
                label: '12'
              '2':
                label: '6'
              '3':
                label: '4'
              '4':
                label: '3'
              '6':
                label: '2'
              '12':
                label: '1'