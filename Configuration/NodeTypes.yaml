'TYPO3.Neos:ContentCollection':
  constraints:
    nodeTypes:
      'MapSeven.Gallery:Image': FALSE

'TYPO3.Neos.NodeTypes:Image':
  properties:
    clickEnlarge:
      type: boolean
      ui:
        label: 'ClickEnlarge'
        inspector:
          group: 'image'
    showInGallery:
      type: string
      ui:
        label: 'show also in Gallery'
        reloadIfChanged: TRUE
        inspector:
          group: 'image'

'MapSeven.Gallery:Gallery':
  superTypes:
    - 'TYPO3.Neos.NodeTypes:Column'
    - 'MapSeven.Gallery:GallerySettingsMixin'
  ui:
    label: 'Gallery'
    group: 'plugins'
    icon: 'icon-picture'
    inlineEditable: TRUE
    inspector:
      groups:
        'settings':
          label: 'Gallery Settings'
  childNodes:
    image:
      type: 'TYPO3.Neos:ContentCollection'
      constraints:
        nodeTypes:
          'MapSeven.Gallery:Image': TRUE
          '*': FALSE

# use this only for gallery images
'MapSeven.Gallery:Image':
  superTypes:
    - 'TYPO3.Neos:Content'
    - 'TYPO3.Neos.NodeTypes:ImageMixin'
  ui:
    label: 'Image'
    icon: 'icon-picture'
  properties:
    caption:
      type: string
      defaultValue: ''
      ui:
        label: 'Caption'
        reloadIfChanged: TRUE
        inlineEditable: FALSE
        inspector:
          group: 'image'
    hideInOverview:
      type: boolean
      ui:
        label: 'Hide in Overview'
        inspector:
          group: 'image'

'MapSeven.Gallery:TagGallery':
  superTypes:
    - 'TYPO3.Neos:Content'
    - 'MapSeven.Gallery:GallerySettingsMixin'
  ui:
    label: 'Tag Gallery'
    group: 'plugins'
    icon: 'icon-picture'
    inspector:
      groups:
        'settings':
          label: 'Gallery Settings'
  properties:
    width:
      type: string
      defaultValue: ''
      ui:
        label: 'Image Width'
        reloadIfChanged: TRUE
        inspector:
          group: 'settings'
    height:
      type: string
      defaultValue: ''
      ui:
        label: 'Image Height'
        reloadIfChanged: TRUE
        inspector:
          group: 'settings'
    title:
      type: string
      defaultValue: ''
      ui:
        label: 'Title'
        reloadIfChanged: TRUE
        inspector:
          group: 'settings'
    tags:
      type: array
      ui:
        label: 'Tags'
        inspector:
          group: 'settings'
          editor: 'TYPO3.Neos/Inspector/Editors/SelectBoxEditor'
          editorOptions:
            dataSourceIdentifier: 'mapseven-gallery-tag'
    previewImage:
      type: TYPO3\Media\Domain\Model\ImageVariant
      ui:
        label: 'previewImage'
        reloadIfChanged: TRUE
        inspector:
          group: 'settings'

# Gallery Settings mixin
'MapSeven.Gallery:GallerySettingsMixin':
  abstract: TRUE
  properties:
    marginBottom:
      type: string
      defaultValue: 'margin-bottom-20'
      ui:
        reloadIfChanged: TRUE
        label: 'Margin Bottom'
        inspector:
          group: 'settings'
          editor: Content/Inspector/Editors/SelectBoxEditor
          editorOptions:
            values:
              '0':
                label: ''
              '5':
                label: '5'
              '10':
                label: '10'
              '15':
                label: '15'
              '20':
                label: '20'
              '25':
                label: '25'
              '30':
                label: '30'
    columns:
      type: string
      defaultValue: '3'
      ui:
        reloadIfChanged: TRUE
        label: 'Images per Row'
        inspector:
          group: 'settings'
          editor: Content/Inspector/Editors/SelectBoxEditor
          editorOptions:
            values:
              '1':
                label: '12'
              '2':
                label: '6'
              '3':
                label: '4'
              '4':
                label: '3'
              '6':
                label: '2'
              '12':
                label: '1'